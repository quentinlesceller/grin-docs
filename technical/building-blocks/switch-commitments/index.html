


<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Create a branded static site from a set of Markdown files to host the documentation of your Open Source or commercial project â€“ customizable, searchable, mobile-friendly, 40+ languages">
      
      
        <link rel="canonical" href="https://docs.grin.mw/technical/building-blocks/switch-commitments/">
      
      
        <meta name="author" content="Grin Developers">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1, mkdocs-material-5.3.3">
    
    
      
        <title>Switch Commitments - Grin Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.fe0cca5b.min.css">
      
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.a46bcfb3.min.css">
      
      
    
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto",-apple-system,BlinkMacSystemFont,Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono",SFMono-Regular,Consolas,Menlo,monospace}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    <body dir="ltr" data-md-color-scheme="preference" data-md-color-primary="" data-md-color-accent="">
  
    
      <script>matchMedia("(prefers-color-scheme: dark)").matches&&document.body.setAttribute("data-md-color-scheme","slate")</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#introduction-to-switch-commitments" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid" aria-label="Header">
    <a href="https://docs.grin.mw" title="Grin Documentation" class="md-header-nav__button md-logo" aria-label="Grin Documentation">
      
  <img src="../../../assets/images/grin-logo.svg" alt="logo">

    </a>
    <label class="md-header-nav__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header-nav__title" data-md-component="header-title">
      
        <div class="md-header-nav__ellipsis">
          <span class="md-header-nav__topic md-ellipsis">
            Grin Documentation
          </span>
          <span class="md-header-nav__topic md-ellipsis">
            
              Switch Commitments
            
          </span>
        </div>
      
    </div>
    
      <label class="md-header-nav__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active">
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0116 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 019.5 16 6.5 6.5 0 013 9.5 6.5 6.5 0 019.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" data-md-component="search-reset" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header-nav__source">
        
<a href="https://github.com/mimblewimble/grin/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mimblewimble/grin
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
        
      
      
        
          

  

<nav class="md-tabs md-tabs--active" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  <li class="md-tabs__item">
    
      <a href="../../.." class="md-tabs__link">
        Home
      </a>
    
  </li>

      
        
      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../../integrations/intro/" class="md-tabs__link">
          Integrations
        </a>
      
    </li>
  

      
        
  
  
    <li class="md-tabs__item">
      
        <a href="../../table-of-contents/" class="md-tabs__link md-tabs__link--active">
          Technical Details
        </a>
      
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="https://docs.grin.mw" title="Grin Documentation" class="md-nav__button md-logo" aria-label="Grin Documentation">
      
  <img src="../../../assets/images/grin-logo.svg" alt="logo">

    </a>
    Grin Documentation
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/mimblewimble/grin/" title="Go to repository" class="md-source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M439.55 236.05L244 40.45a28.87 28.87 0 00-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 01-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 000 40.81l195.61 195.6a28.86 28.86 0 0040.8 0l194.69-194.69a28.86 28.86 0 000-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    mimblewimble/grin
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../../getting-started/" title="Getting started" class="md-nav__link">
      Getting started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-3" type="checkbox" id="nav-3">
    
    <label class="md-nav__link" for="nav-3">
      Integrations
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Integrations" data-md-level="1">
      <label class="md-nav__title" for="nav-3">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Integrations
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../../integrations/intro/" title="Intro" class="md-nav__link">
      Intro
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Technical Details
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Technical Details" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Technical Details
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../table-of-contents/" title="Table of Contents" class="md-nav__link">
      Table of Contents
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../introduction-to-mimblewimble/" title="Introduction to Mimblewimble" class="md-nav__link">
      Introduction to Mimblewimble
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../grin-for-bitcoiners/" title="Grin for Bitcoiners" class="md-nav__link">
      Grin for Bitcoiners
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-4" type="checkbox" id="nav-4-4" checked>
    
    <label class="md-nav__link" for="nav-4-4">
      Building Blocks
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Building Blocks" data-md-level="2">
      <label class="md-nav__title" for="nav-4-4">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Building Blocks
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../merkle-mountain-ranges/" title="Merkle Mountain Ranges (MMRs)" class="md-nav__link">
      Merkle Mountain Ranges (MMRs)
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../merkle-proof/" title="Merkle Proof" class="md-nav__link">
      Merkle Proof
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Switch Commitments
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 9h14V7H3v2m0 4h14v-2H3v2m0 4h14v-2H3v2m16 0h2v-2h-2v2m0-10v2h2V7h-2m0 6h2v-2h-2v2z"/></svg>
        </span>
      </label>
    
    <a href="./" title="Switch Commitments" class="md-nav__link md-nav__link--active">
      Switch Commitments
    </a>
    
      
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-introduction" class="md-nav__link">
    General introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hash-commitment" class="md-nav__link">
    Hash Commitment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pedersen-commitment" class="md-nav__link">
    Pedersen Commitment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#properties-of-commitment-schemes" class="md-nav__link">
    Properties of commitment schemes:
  </a>
  
    <nav class="md-nav" aria-label="Properties of commitment schemes:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-of-these-properties" class="md-nav__link">
    Security of these properties:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutual-exclusivity" class="md-nav__link">
    Mutual exclusivity:
  </a>
  
    <nav class="md-nav" aria-label="Mutual exclusivity:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#always-a-compromise" class="md-nav__link">
    Always a compromise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-for-cryptocurrencies" class="md-nav__link">
    Considerations for cryptocurrencies
  </a>
  
    <nav class="md-nav" aria-label="Considerations for cryptocurrencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-hard-choice" class="md-nav__link">
    A hard choice?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#properties-of-pedersen-commitments" class="md-nav__link">
    Properties of Pedersen Commitments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducing-switch-commitments" class="md-nav__link">
    Introducing Switch Commitments
  </a>
  
    <nav class="md-nav" aria-label="Introducing Switch Commitments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-does-this-work-in-detail" class="md-nav__link">
    How does this work in detail
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
    
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-5" type="checkbox" id="nav-4-5">
    
    <label class="md-nav__link" for="nav-4-5">
      Blockchain and Consensus
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Blockchain and Consensus" data-md-level="2">
      <label class="md-nav__title" for="nav-4-5">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Blockchain and Consensus
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../blockchain-and-consensus/coinbase-maturity-rule/" title="Coinbase Maturity Rule" class="md-nav__link">
      Coinbase Maturity Rule
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../blockchain-and-consensus/fast-sync/" title="Fast Sync" class="md-nav__link">
      Fast Sync
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../blockchain-and-consensus/proof-of-work/" title="Proof-of-Work" class="md-nav__link">
      Proof-of-Work
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../blockchain-and-consensus/pruning-blockchain-data/" title="Pruning Blockchain Data" class="md-nav__link">
      Pruning Blockchain Data
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../blockchain-and-consensus/state-and-storage/" title="State and Storage" class="md-nav__link">
      State and Storage
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-nav__toggle md-toggle" data-md-toggle="nav-4-6" type="checkbox" id="nav-4-6">
    
    <label class="md-nav__link" for="nav-4-6">
      Miscellaneous
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M8.59 16.58L13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.42z"/></svg>
      </span>
    </label>
    <nav class="md-nav" aria-label="Miscellaneous" data-md-level="2">
      <label class="md-nav__title" for="nav-4-6">
        <span class="md-nav__icon md-icon">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
        </span>
        Miscellaneous
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellaneous/contracts/" title="Contracts" class="md-nav__link">
      Contracts
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellaneous/dandelion/" title="Dandelion" class="md-nav__link">
      Dandelion
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../miscellaneous/range-proof-format/" title="Range Proofs Format" class="md-nav__link">
      Range Proofs Format
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#general-introduction" class="md-nav__link">
    General introduction
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    Examples
  </a>
  
    <nav class="md-nav" aria-label="Examples">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hash-commitment" class="md-nav__link">
    Hash Commitment
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#pedersen-commitment" class="md-nav__link">
    Pedersen Commitment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#properties-of-commitment-schemes" class="md-nav__link">
    Properties of commitment schemes:
  </a>
  
    <nav class="md-nav" aria-label="Properties of commitment schemes:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#security-of-these-properties" class="md-nav__link">
    Security of these properties:
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mutual-exclusivity" class="md-nav__link">
    Mutual exclusivity:
  </a>
  
    <nav class="md-nav" aria-label="Mutual exclusivity:">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#always-a-compromise" class="md-nav__link">
    Always a compromise
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations-for-cryptocurrencies" class="md-nav__link">
    Considerations for cryptocurrencies
  </a>
  
    <nav class="md-nav" aria-label="Considerations for cryptocurrencies">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#a-hard-choice" class="md-nav__link">
    A hard choice?
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#properties-of-pedersen-commitments" class="md-nav__link">
    Properties of Pedersen Commitments
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#introducing-switch-commitments" class="md-nav__link">
    Introducing Switch Commitments
  </a>
  
    <nav class="md-nav" aria-label="Introducing Switch Commitments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-does-this-work-in-detail" class="md-nav__link">
    How does this work in detail
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    Conclusion
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/mimblewimble/docs/edit/master/docs/technical/building-blocks/switch-commitments.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  
                
                
                <h1 id="introduction-to-switch-commitments">Introduction to Switch Commitments</h1>
<h2 id="general-introduction">General introduction</h2>
<p>In cryptography a <em>Commitment</em> (or <em>commitment scheme</em>) refers to a concept which can be imagined
like a box with a lock. You can put something into the box (for example a piece of a paper with a
secret number written on it), lock it and give it to another person (or the public).</p>
<p>The other person doesn't know yet what's the secret number in the box, but if you decide to publish
your secret number later in time and want to prove that this really is the secret which you came
up with in the first place (and not a different one) you can prove this simply by giving the
key of the box to the other person.</p>
<p>They can unlock the box, compare the secret within the box with the secret you just published
and can be sure that you didn't change your secret since you locked it. You "<strong>committed</strong>"
to the secret number beforehand, meaning you cannot change it between the time of
commitment and the time of revealing.</p>
<h2 id="examples">Examples</h2>
<h3 id="hash-commitment">Hash Commitment</h3>
<p>A simple commitment scheme can be realized with a cryptographic hash function. For example: Alice and Bob
want to play <em>"Guess my number"</em> and Alice comes up with with her really secret number <code>29</code> which
Bob has to guess in the game, then before the game starts, Alice calculates:</p>
<pre><code>hash( 29 + r )
</code></pre>
<p>and publishes the result to Bob. The <code>r</code> is a randomly chosen  <em>Blinding Factor</em> which is
needed because otherwise Bob could just try hashing all the possible numbers for the game and
compare the hashes.</p>
<p>When the game is finished, Alice simply needs to publish her secret number <code>29</code> and the
blinding factor <code>r</code> and Bob can calculate the hash himself and easily verify that Alice
did not change the secret number during the game.</p>
<h3 id="pedersen-commitment">Pedersen Commitment</h3>
<p>Other, more advanced commitment schemes can have additional properties. For example Mimblewimble
and Confidential Transactions (CT) make heavy use of
<em><a href="https://link.springer.com/content/pdf/10.1007/3-540-46766-1_9.pdf">Pedersen Commitments</a></em>,
which are <em>homomorphic</em> commitments. Homomorphic in this context means that (speaking in the
"box" metaphor from above) you can take two of these locked boxes (<em>box1</em> and <em>box2</em>) and
somehow "<em>add</em>" them together, so that you
get a single box as result (which still is locked), and if you open this single box later
(like in the examples before) the secret it contains, is the sum of the secrets
from <em>box1</em> and <em>box2</em>.</p>
<p>While this "box" metaphor no longer seems to be reasonable in the real-world this
is perfectly possible using the properties of operations on elliptic curves.</p>
<p>Look into <a href="../../introduction-to-mimblewimble/">Introduction to Mimblewimble</a> for further details on Pedersen Commitments
and how they are used in Grin.</p>
<h2 id="properties-of-commitment-schemes">Properties of commitment schemes:</h2>
<p>In general for any commitment scheme we can identify two important properties
which can be weaker or stronger, depending on the type of commitment scheme:</p>
<ul>
<li>
<p><strong>Hidingness (or Confidentiality):</strong> How good is the commitment scheme protecting the secret
  commitment. Or speaking in terms of our example from above: what would an attacker need to
  open the box (and learn the secret number) without having the key to unlock it?</p>
</li>
<li>
<p><strong>Bindingness:</strong> Is it possible at all (or how hard would it be) for an attacker to somehow
  find a different secret, which would produce the same commitment, so that the attacker could
  later open the commitment to a different secret, thus breaking the <em>binding</em> of the
  commitment.</p>
</li>
</ul>
<h3 id="security-of-these-properties">Security of these properties:</h3>
<p>For these two properties different security levels can be identified.</p>
<p>The two most important combinations of these are</p>
<ul>
<li><strong>perfectly binding</strong> and <strong>computationally hiding</strong> commitment schemes and</li>
<li><strong>computationally binding</strong> and <strong>perfectly hiding</strong> commitment schemes</li>
</ul>
<p>"<em>Computationally</em>" binding or hiding means that the property (bindingness/hidingness)
is secured by the fact that the underlying mathematical problem is too hard to be solved
with existing computing power in reasonable time (i.e. not breakable today as computational
resources are bound in the real world).</p>
<p>"<em>Perfectly</em>" binding or hiding means that even with infinite computing power
it would be impossible to break the property (bindingness/hidingness).</p>
<h3 id="mutual-exclusivity">Mutual exclusivity:</h3>
<p>It is important to realize that it's <strong>impossible</strong> that any commitment scheme can be
<em>perfectly binding</em> <strong>and</strong> <em>perfectly hiding</em> at the same time. This can be easily shown
with a thought experiment: Imagine an attacker having infinite computing power, he could
simply generate a commitment for all possible values (and blinding factors) until finding a
pair that outputs the same commitment. If we further assume the commitment scheme is
<em>perfectly binding</em> (meaning there cannot be two different values leading to the same
commitment) this uniquely would identify the value within the commitment, thus
breaking the hidingness.</p>
<p>The same is true the other way around. If a commitment scheme is <em>perfectly hiding</em>
there must exist several input values resulting in the same commitment (otherwise an
attacker with infinite computing power could just try all possible values as
described above). This concludes that the commitment scheme cannot be <em>perfectly
binding</em>.</p>
<h4 id="always-a-compromise">Always a compromise</h4>
<p>The key take-away point is this: it's <strong>always a compromise</strong>, you can never have both
properties (<em>hidingness</em> and <em>bindingness</em>) with <em>perfect</em> security. If one is <em>perfectly</em>
secure then the other can be at most <em>computationally</em> secure
(and the other way around).</p>
<h3 id="considerations-for-cryptocurrencies">Considerations for cryptocurrencies</h3>
<p>Which roles do these properties play in the design of cryptocurrencies?</p>
<p><strong>Hidingness</strong>:
In privacy oriented cryptocurrencies like Grin, commitment schemes are used to secure
the contents of transactions. The sender commits to an amount of coins he sends, but for
the general public the concrete amount should remain private (protected by the <em>hidingness</em> property of the commitment scheme).</p>
<p><strong>Bindingness</strong>:
At the same time no transaction creator should ever be able to change his commitment
to a different transaction amount later in time. If this would be possible, an attacker
could spend more coins than previously committed to in an UTXO (unspent transaction
output) and therefore inflate coins out of thin air. Even worse, as the amounts are
hidden, this could go undetected.</p>
<p>So there is a valid interest in having both of these properties always secured and
never be violated.</p>
<p>Even with the intent being that both of these properties will hold for the lifetime
of a cryptocurrency, still a choice has to be made about which commitment scheme to use.</p>
<h4 id="a-hard-choice">A hard choice?</h4>
<p>Which one of these two properties needs to be <em>perfectly</em> safe
and for which one it would be sufficient to be <em>computationally</em> safe?
Or in other words: in case of a disaster, if the commitment scheme unexpectedly
gets broken, which one of the two properties should be valued higher?
Economical soundness (no hidden inflation possible) or ensured privacy (privacy will
be preserved)?</p>
<p>This seems like a hard to choice to make.</p>
<p>If we look closer into this we realize that the commitment scheme only needs to be
<em>perfectly</em> binding at the point in time when the scheme actually gets broken. Until
then it will be safe even if it's only <em>computationally</em> binding.</p>
<p>At the same time a privacy-oriented cryptocurrency needs to ensure the <em>hidingness</em>
property <strong>forever</strong>. Unlike the <em>binding</em> property, which only is important at the
time when a transaction is created and will not affect past transactions, the <em>hidingness</em>
property must be ensured at all times. Otherwise, in the unfortunate case should the
commitment scheme be broken, an attacker could go back in the chain and unblind
past transactions, thus break the privacy property retroactively.</p>
<h2 id="properties-of-pedersen-commitments">Properties of Pedersen Commitments</h2>
<p>Pedersen Commitments are <strong>computationally binding</strong> and <strong>perfectly hiding</strong> as for a given
commitment to the value <code>v</code>: <code>v*H + r*G</code> there may exist a pair of different values <code>r1</code>
and <code>v1</code> such that the sum will be the same. Even if you have infinite computing power
and could try all possible values, you would not be able to tell which one is the original one
(thus <em>perfectly hiding</em>).</p>
<h2 id="introducing-switch-commitments">Introducing Switch Commitments</h2>
<p>So what can be done if the bindingness of the Pedersen Commitment unexpectedly gets broken?</p>
<p>In general a cryptocurrency confronted with a broken commitment scheme could choose to
change the scheme in use, but the problem with this approach would be that it requires to
create new transaction outputs using the new scheme to make funds secure again. This would
require every coin holder to move his coins into new transaction outputs.
If coins are not moved into new outputs, they will not profit from the
security of the new commitment scheme. Also, this has to happen <strong>before</strong> the scheme gets
actually broken in the wild, otherwise the existing UTXOs no longer can be assumed
to contain correct values.</p>
<p>In this situation <a href="https://eprint.iacr.org/2017/237.pdf"><em>Switch Commitments</em></a> offer a neat 
solution. These type of commitments allow changing the properties of the commitments just
by changing the revealing / validating procedure without changing the way commitments
are created. (You "<em>switch</em>" to a new validation scheme which is backwards
compatible with commitments created long before the actual "<em>switch</em>").</p>
<h3 id="how-does-this-work-in-detail">How does this work in detail</h3>
<p>First let's introduce a new commitment scheme: The <strong>ElGamal commitment</strong> scheme is a commitment
scheme similiar to Pedersen Commitments and it's <em>perfectly binding</em> (but only <em>computationally
hiding</em> as we can never have both).
It looks very similar to a Pedersen Commitment, with the addition of a new
element, calculated by multiplying the blinding factor <code>r</code> with another generator point <code>J</code>:</p>
<pre><code>v*H + r*G ,  r*J
</code></pre>
<p>So if we store the additional field <code>r*J</code> and ignore it for now, we can treat it like
Pedersen Commitments, until we decide to also validate the full ElGamal
commitment at some time in future. This is exactly what was implemented in an
<a href="https://github.com/mimblewimble/grin/blob/5a47a1710112153fb38e4406251c9874c366f1c0/core/src/core/transaction.rs#L812">earlier version of Grin</a>,
before mainnet was launched. In detail: the hashed value of <code>r*J</code>
(<em>switch_commit_hash</em>) was added to the transaction output, but this came with
the burden of increasing the size of each output by 32 bytes.</p>
<p>Fortunately, later on the Mimblewimble mailinglist Tim Ruffing came up with a really
<a href="https://lists.launchpad.net/mimblewimble/msg00479.html">beautiful idea</a>
(initially suggested by Pieter Wuille), which offers the same advantages but doesn't
need this extra storage of an additional element per transaction output:</p>
<p>The idea is the following:</p>
<p>A normal Pedersen commitment looks like this:</p>
<pre><code>v*H + r*G
</code></pre>
<p>(<code>v</code> is value of the input/output, <code>r</code> is a truly random blinding factor, and <code>H</code> and <code>G</code> are
two generator points on the elliptic curve).</p>
<p>If we adapt this by having <code>r</code> not being random itself, but using another random number <code>r'</code>
and create the Pedersen Commitment:</p>
<pre><code>v*H + r*G
</code></pre>
<p>such that:</p>
<pre><code>r = r' + hash( v*H + r'*G  ,  r'*J )
</code></pre>
<p>(using the additional third generation point <code>J</code> on the curve) then <code>r</code> still is perfectly
valid as a blinding factor, as it's still randomly distributed, but now we see
that the part within the brackets of the hash function (<code>v*H + r'*G  ,  r'*J</code>) is an
<strong>ElGamal commitment</strong>.</p>
<p>This neat idea lead to the removal of the switch commitment hash from the outputs in this
(and following) <a href="https://github.com/mimblewimble/grin/issues/998">pull requests</a> as now it
could be easily included into the Pedersen Commitments.</p>
<p>This is how it is currently implemented in Grin. Pedersen commitments are
used for the Confidential Transaction but instead of choosing the blinding factor <code>r</code>
only by random, it is calculated by adding the hash of an ElGamal commitment to a random <code>r'</code>
(see here in <a href="https://github.com/mimblewimble/secp256k1-zkp/blob/73617d0fcc4f51896cce4f9a1a6977a6958297f8/src/modules/commitment/main_impl.h#L267">main_impl.h#L267</a>).</p>
<p>In general switch commitments were first described in the paper
<a href="https://eprint.iacr.org/2017/237.pdf">"Switch Commitments: A Safety Switch for Confidential Transactions"</a>).
The <strong>"switch"</strong> in the name comes from the fact that you can virtually flip a "switch" in
the future and simply by changing the validation procedure you can change the strength of
the bindingness and hidingness property of your commitments and this even works in a
backwards compatible way with commitments created today.</p>
<h2 id="conclusion">Conclusion</h2>
<p>Grin uses Pedersen Commitments - like other privacy cryptocurrencies do as well - with
the only difference that the random blinding factor <code>r</code> is created using the ElGamal
commitment scheme.</p>
<p>This might not seem like a big change on a first look, but it provides an
important safety measure:</p>
<p>Pedersen Commitments are already <em>perfectly hiding</em> so whatever happens, privacy will
never be at risk without requiring any action from users. But in case of a disaster if the
bindingness of the commitment scheme gets broken, then switch commitments can be enabled 
(via a soft fork) requiring that all new transactions prove that their commitment is not
breaking the bindingness by validating the full ElGamal commitment. </p>
<p>But in this case users would still have a choice:</p>
<ul>
<li>
<p>they can decide to continue to create new transactions, even if this might compromise
  their privacy (only on their <strong>last</strong> UTXOs) as the ElGamal commitment scheme is 
  only computationally hiding, but at least they would still have access to their coins</p>
</li>
<li>
<p>or users can decide to just leave the money alone, walk away and make no more transactions
  (but preserve their privacy, as their old transactions only validated the Pedersen commitment
  which is perfectly hiding)</p>
</li>
</ul>
<p>There are many cases where a privacy leak is much more dangerous to one's life than
some cryptocurrency might be worth. But this is a decision that should be left up to
the individual user and switch commitments enable this type of choice.</p>
<p>It should be made clear that this is a safety measure meant to be enabled in case of a
disaster. If advances in computing would put the hardness of the discrete log problem
in question, a lot of other cryptographic systems, including other cryptocurrencies,
will be in urgent need of updating their primitives to a future-proof system. The switch
commitments just provide an additional layer of security if the bindingness of Pedersen
commitments ever breaks unexpectedly.</p>
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid" aria-label="Footer">
        
          <a href="../merkle-proof/" title="Merkle Proof" class="md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
            </div>
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Merkle Proof
              </div>
            </div>
          </a>
        
        
          <a href="../../blockchain-and-consensus/coinbase-maturity-rule/" title="Coinbase Maturity Rule" class="md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-footer-nav__title">
              <div class="md-ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Coinbase Maturity Rule
              </div>
            </div>
            <div class="md-footer-nav__button md-icon">
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2016 - 2020 Grin Developers
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
      </div>
      
  <div class="md-footer-social">
    
      
      
        
        
      
      <a href="https://github.com/mimblewimble/grin" target="_blank" rel="noopener" title="github.com" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
      </a>
    
      
      
        
        
      
      <a href="https://keybase.io/team/grincoin" target="_blank" rel="noopener" title="keybase.io" class="md-footer-social__link">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M286.17 419a18 18 0 1018 18 18 18 0 00-18-18zm111.92-147.6c-9.5-14.62-39.37-52.45-87.26-73.71q-9.1-4.06-18.38-7.27a78.43 78.43 0 00-47.88-104.13c-12.41-4.1-23.33-6-32.41-5.77-.6-2-1.89-11 9.4-35L198.66 32l-5.48 7.56c-8.69 12.06-16.92 23.55-24.34 34.89a51 51 0 00-8.29-1.25c-41.53-2.45-39-2.33-41.06-2.33-50.61 0-50.75 52.12-50.75 45.88l-2.36 36.68c-1.61 27 19.75 50.21 47.63 51.85l8.93.54a214 214 0 00-46.29 35.54C14 304.66 14 374 14 429.77v33.64l23.32-29.8a148.6 148.6 0 0014.56 37.56c5.78 10.13 14.87 9.45 19.64 7.33 4.21-1.87 10-6.92 3.75-20.11a178.29 178.29 0 01-15.76-53.13l46.82-59.83-24.66 74.11c58.23-42.4 157.38-61.76 236.25-38.59 34.2 10.05 67.45.69 84.74-23.84.72-1 1.2-2.16 1.85-3.22a156.09 156.09 0 012.8 28.43c0 23.3-3.69 52.93-14.88 81.64-2.52 6.46 1.76 14.5 8.6 15.74 7.42 1.57 15.33-3.1 18.37-11.15C429 443 434 414 434 382.32c0-38.58-13-77.46-35.91-110.92zM142.37 128.58l-15.7-.93-1.39 21.79 13.13.78a93 93 0 00.32 19.57l-22.38-1.34a12.28 12.28 0 01-11.76-12.79L107 119c1-12.17 13.87-11.27 13.26-11.32l29.11 1.73a144.35 144.35 0 00-7 19.17zm148.42 172.18a10.51 10.51 0 01-14.35-1.39l-9.68-11.49-34.42 27a8.09 8.09 0 01-11.13-1.08l-15.78-18.64a7.38 7.38 0 011.34-10.34l34.57-27.18-14.14-16.74-17.09 13.45a7.75 7.75 0 01-10.59-1s-3.72-4.42-3.8-4.53a7.38 7.38 0 011.37-10.34L214 225.19s-18.51-22-18.6-22.14a9.56 9.56 0 011.74-13.42 10.38 10.38 0 0114.3 1.37l81.09 96.32a9.58 9.58 0 01-1.74 13.44zM187.44 419a18 18 0 1018 18 18 18 0 00-18-18z"/></svg>
      </a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/vendor.d710d30a.min.js"></script>
      <script src="../../../assets/javascripts/bundle.4a5ba8d6.min.js"></script><script id="__lang" type="application/json">{"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents"}</script>
      
      <script>
        app = initialize({
          base: "../../..",
          features: ["tabs"],
          search: Object.assign({
            worker: "../../../assets/javascripts/worker/search.9b3611bd.min.js"
          }, typeof search !== "undefined" && search)
        })
      </script>
      
    
  </body>
</html>